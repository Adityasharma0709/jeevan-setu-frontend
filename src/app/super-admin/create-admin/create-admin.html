<!-- CREATE ADMIN DIALOG TEMPLATE -->

<ng-template #createAdminDialog>

  <form [formGroup]="form" class="space-y-5">

<z-form-field>
  <label z-form-label zRequired>Name</label>
  <z-form-control>
    <input z-input type="text" formControlName="name" placeholder="Enter name" />
  </z-form-control>
</z-form-field>

<z-form-field>
  <label z-form-label zRequired>Email</label>
  <z-form-control>
    <input z-input type="email" formControlName="email" placeholder="Enter email" />
  </z-form-control>
</z-form-field>

<z-form-field>
  <label z-form-label zRequired>Password</label>
  <z-form-control>
    <input z-input type="password" formControlName="password" placeholder="Enter password" />
  </z-form-control>
</z-form-field>


  </form>

</ng-template>

<!-- PAGE HEADER -->

<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4">
  <h2 class="text-xl font-bold">Admins</h2>

<button z-button class="w-full sm:w-auto" (click)="openCreateDialog()">
Create Admin </button>

</div>

<!-- ================= DESKTOP TABLE ================= -->

<div class="hidden md:block overflow-x-auto border rounded-lg">

  <table z-table class="w-full min-w-[700px]">

<thead z-table-header>
  <tr z-table-row>
    <th z-table-head>Name</th>
    <th z-table-head>Email</th>
    <th z-table-head>Status</th>
    <th z-table-head>Action</th>
  </tr>
</thead>

<tbody z-table-body *ngIf="admins$ | async as admins">

  <tr z-table-row *ngFor="let a of admins">

    <td z-table-cell>{{ a.name }}</td>

    <td z-table-cell class="text-gray-600">
      {{ a.email }}
    </td>

    <td z-table-cell>
      <span
        class="px-2 py-1 rounded text-xs font-medium"
        [ngClass]="
          a.status === 'ACTIVE'
            ? 'bg-green-100 text-green-700'
            : 'bg-red-100 text-red-700'
        "
      >
        {{ a.status }}
      </span>
    </td>

    <td z-table-cell>
      <button
        z-button
        zSize="sm"
        [zType]="a.status === 'ACTIVE' ? 'destructive' : 'default'"
        (click)="toggleAdminStatus(a)"
      >
        {{ a.status === 'ACTIVE' ? 'Deactivate' : 'Activate' }}
      </button>
    </td>

  </tr>

</tbody>

  </table>

</div>

<!-- ================= MOBILE CARDS ================= -->

<div class="md:hidden space-y-3" *ngIf="admins$ | async as admins">

  <div
    *ngFor="let a of admins"
    class="border rounded-lg p-4 bg-white shadow-sm"
  >

<div class="flex justify-between items-start">

  <div>
    <h3 class="font-semibold">{{ a.name }}</h3>
    <p class="text-sm text-gray-500 break-all">
      {{ a.email }}
    </p>
  </div>

  <span
    class="px-2 py-1 rounded text-xs font-medium"
    [ngClass]="
      a.status === 'ACTIVE'
        ? 'bg-green-100 text-green-700'
        : 'bg-red-100 text-red-700'
    "
  >
    {{ a.status }}
  </span>

</div>

<button
  z-button
  class="w-full mt-3"
  [zType]="a.status === 'ACTIVE' ? 'destructive' : 'default'"
  (click)="toggleAdminStatus(a)"
>
  {{ a.status === 'ACTIVE' ? 'Deactivate' : 'Activate' }}
</button>

  </div>

</div>
